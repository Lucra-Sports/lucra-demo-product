(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{785:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var l=s(5155),r=s(2115),a=s(6874),n=s.n(a);function i(e){let{isGenerating:t,targetNumber:s,onAnimationComplete:a}=e,[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),[m,x]=(0,r.useState)(!1),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{t&&null!==s?(x(!1),i(null),u(0),d(!1),b(s)):t||o||(u(0),x(!1),i(null))},[t,s]);let b=e=>{d(!0),u(1);let t=Date.now(),s=()=>{let l=Math.min((Date.now()-t)/5e3,1);u(Math.floor(1+l*l*(3-2*l)*(e-1))),l<1?h.current=requestAnimationFrame(s):(u(e),i(e),x(!0),setTimeout(()=>{null==a||a(e)},800))};h.current=requestAnimationFrame(s)};return((0,r.useEffect)(()=>()=>{h.current&&cancelAnimationFrame(h.current)},[]),o)?(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-white/80",children:(0,l.jsx)("div",{className:"text-8xl font-bold mb-4 transform transition-all duration-200 ".concat(t?"scale-110 animate-pulse":"scale-100"),children:c.toLocaleString()})}),m&&(0,l.jsx)("div",{className:"text-white/80 text-lg mb-4 animate-bounce",children:"Your Lucky Number!"}),t&&(0,l.jsx)("div",{className:"text-white/60 text-sm animate-pulse",children:"Generating..."})]})}):(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white/60 text-xl text-center",children:"Press the button to generate a number!"})})}var o=s(1886),d=s(5695),c=s(4942),u=s(3316);function m(){let{redirectUrl:e,showRedirectPrompt:t,handleRedirectResponse:s}=(0,u.w)();return t&&e?(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("i",{className:"ri-share-line text-blue-600 text-xl"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Shared Lucra Content"}),(0,l.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"Someone shared a Lucra link with you. Would you like to view it?"}),(0,l.jsx)("div",{className:"bg-blue-100 rounded-lg p-2 mb-3",children:(0,l.jsx)("p",{className:"text-xs text-blue-600 font-mono truncate",children:e})}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Yes, Open Link"}),(0,l.jsx)("button",{onClick:()=>s(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors",children:"No, Thanks"})]})]})]})}):null}function x(e){let{userPhoneNumber:t=""}=e;return(0,r.useEffect)(()=>{(0,c.PI)(t)},[t]),null}var h=s(1890);function b(){let e=(0,d.useRouter)(),t=(0,o.HW)(),[s,a]=(0,r.useState)(!1),[u,b]=(0,r.useState)([]),[f,N]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),[p,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t?p||(console.log("!!!: RNG: Dashboard - updating Lucra SDK with user:",t),(0,c.TK)(t),y(!0)):e.push("/auth/login")},[e,t]),(0,r.useEffect)(()=>{let e=async()=>{let e=await (0,o.zN)();w(e),console.log("!!!: RNG: Dashboard - fetched bindings:",e)};t&&!j&&e()},[]);let k=async()=>{if(!s){a(!0),N(null);try{let e=await (0,o.Nb)();N(e)}catch(e){alert(e.message||"Failed to generate number"),a(!1)}}},S=async()=>{if(!g){v(!0);try{await (0,o._G)(),alert("Bindings deleted successfully")}catch(e){alert(e.message||"Failed to delete bindings")}finally{v(!1)}}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary relative overflow-hidden",children:[(0,l.jsx)(x,{userPhoneNumber:h.env.NEXT_PUBLIC_MOCK_PHONE_NUMBER}),(0,l.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute -top-10 -left-10 w-40 h-40 bg-white/10 rounded-full animate-pulse"}),(0,l.jsx)("div",{className:"absolute top-1/4 -right-20 w-60 h-60 bg-white/5 rounded-full animate-bounce"}),(0,l.jsx)("div",{className:"absolute bottom-1/4 -left-20 w-32 h-32 bg-white/10 rounded-full animate-ping"})]}),(0,l.jsx)(n(),{href:"/profile",className:"fixed top-6 right-6 z-40",children:(0,l.jsx)("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300 transform hover:scale-110",children:(0,l.jsx)("i",{className:"ri-user-line text-white text-xl"})})}),(0,l.jsxs)("div",{className:"flex flex-col h-screen pt-20 pb-32 px-6 relative z-10",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"font-['Pacifico'] text-6xl text-white mb-4 drop-shadow-lg",children:"RNG"}),(0,l.jsx)("p",{className:"text-white/80 text-lg",children:"Your Random Number Generator"})]}),(0,l.jsx)(m,{}),(0,l.jsxs)("button",{onClick:()=>{var e;null==(e=(0,c.bh)())||e.createMatchup()},className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-2xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-300 !rounded-button mb-4",children:[(0,l.jsx)("i",{className:"ri-sword-line mr-2"}),"Challenge Opponent in Lucra"]}),(0,l.jsxs)("button",{onClick:S,disabled:g,className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-4 rounded-2xl font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300 !rounded-button disabled:opacity-70 disabled:cursor-not-allowed",children:[(0,l.jsx)("i",{className:"ri-delete-bin-line mr-2"}),g?"Deleting...":"Delete Bindings"]}),(0,l.jsx)(i,{isGenerating:s,targetNumber:f,onAnimationComplete:e=>{a(!1),b(t=>[e,...t.slice(0,9)])}}),u.length>0&&!s&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h3",{className:"text-white text-center text-lg mb-4 font-semibold",children:"Recent Numbers"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:u.slice(0,5).map((e,t)=>(0,l.jsx)("div",{className:"bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-semibold",children:e.toLocaleString()},t))})]})]}),(0,l.jsx)("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30",children:(0,l.jsx)("button",{onClick:k,disabled:s,className:"w-20 h-20 bg-gradient-to-r from-primary to-secondary rounded-full shadow-2xl hover:shadow-primary/25 transform hover:scale-110 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed !rounded-button flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("i",{className:"ri-dice-line text-white text-2xl mb-1"}),(0,l.jsx)("div",{className:"text-white text-xs font-bold",children:"Generate"})]})})})]})}},3316:(e,t,s)=>{"use strict";s.d(t,{RedirectProvider:()=>i,w:()=>o});var l=s(5155),r=s(2115),a=s(4942);let n=(0,r.createContext)(null),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{{let e=new URLSearchParams(window.location.search).get("redirect");e&&(i(e),d(!0),console.log("!!!: RedirectProvider: Found redirect URL:",e))}},[]),(0,l.jsx)(n.Provider,{value:{redirectUrl:s,setRedirectUrl:e=>{i(e),e&&d(!0)},showRedirectPrompt:o,setShowRedirectPrompt:d,handleRedirectResponse:e=>{if(e&&s){let e=(0,a.bh)();e&&e.deepLink(s)}d(!1)}},children:t})},o=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useRedirect must be used within a RedirectProvider");return e}},6090:(e,t,s)=>{Promise.resolve().then(s.bind(s,785))}},e=>{var t=t=>e(e.s=t);e.O(0,[244,804,441,684,358],()=>t(6090)),_N_E=e.O()}]);